To derive the position of the shock front in the $(z, \omega)$ plane where the pre-shock ram pressure of the stellar wind and the post-shock pressure equal the external pressure $P(z)$, we need to calculate the pre-shock density $\rho_0$ and the pre-shock velocity perpendicular to the shock front $v_0$.

We assume a spherically symmetric stallar wind that is accelerated to its final velocity $v_{\infty}$ within a few stellar radii before any interaction takes place. For a given mass loss rate $\dot M$, the wind density at any distance $r$ from the central star is 
\begin{equation}\label{eqn:rho}
\rho(r) = \frac{\dot M}{4 \pi r^2 v_{\infty}}\ .
\end{equation}
Figure~\ref{fig:sketch} shows that $v_0$ depends on the position of the shock:
\begin{equation}
\label{eqn:v0}v_0 = v_{\infty} \sin \psi
\end{equation}
with 
\begin{equation}\label{eqn:angle}
\psi+\alpha =  \theta \ .
\end{equation}
Again, Figure~\ref{fig:sketch} shows how two of the angles in this equation can be calculated, so that $\psi$ can be determined. First,
\begin{equation}\label{eqn:theta}
\tan\theta = \frac{\omega}{z}\ ;
\end{equation}
second, the angle $\alpha$ is given by the derivative of the position of the shock front:
\begin{equation}\label{eqn:deriv}
\frac{\rm{d}\omega}{\rm{d}z} = \frac{\sin \alpha}{\cos \alpha} = \tan{\alpha}
\end{equation}
This gives:
\begin{equation}\label{eqn:psi}
\psi = \arctan{\frac{\omega}{z}} - \arctan{\frac{\rm{d}\omega}{\rm{d}z}}\ .
\end{equation}
Inserting equation~\ref{eqn:rho} and \ref{eqn:v0} into eqn.~\ref{eqn:Pofz}, we arrive at: 
\begin{equation}\label{eqn:P}
P(z) = \rho_0 v_0^2 = \frac{\dot{M}}{4\pi v_{\infty}(z^2+\omega^2)} v_{\infty}^2 \sin^2(\psi)
\end{equation}
Inserting eqn.~\ref{eqn:psi} this gives an ordinary differential equation (ODE), that describes the functional form of the shape of the shock front:
\begin{equation}\label{eqn:ode}
\frac{\rm{d}\omega}{\rm{d}z} = \tan\left[\arctan\left(\frac{\omega}{z}\right)-\arcsin\left(\frac{\sqrt{z^2+\omega^2}}{R_0}\right)\right]
\end{equation}
with
\begin{equation}\label{eqn:r0}
R_0(z) = \sqrt{\frac{\dot{M} v_{\infty}}{4\pi P(z)}},
\end{equation}
where $R_0(z)$ is the maximal cylindrical radius of the shock front. In the case of young stars, however,  the circum-stellar disk constrains the stellar wind in the $z=0$ plane, where the stellar wind cannot expand beyond the inner hole in the accretion disk.

The solution to the ODE determines the location of the shock front. This allows us to calculate the pre-shock velocity perpendicular to the shock front using eqn.~\ref{eqn:v0} and the post-shock temperature $T_{\mathrm{post-shock}}$. From eqn.~\ref{eqn:RH3} with negligible pre-shock pressure and $v_0=4\;v_1$ for a strong shock we derive:
\begin{equation}
T_{\mathrm{post-shock}}(z) = \frac{3}{16} \frac{\mu m_{\textrm{H}}}{k} v_0(z)^2,\label{eqn:T}
\end{equation}
where $m_{\textrm{H}}$ the mass of the hydrogen atom, $k$ the Boltzmann constant and $\mu=0.7$ is the mean particle mass for a highly ionized plasma. For general $P(z)$ the ODE needs to be solved numerically\footnote{It is possible to remove all trigonometric functions from eqn.~\ref{eqn:ode} by means of addition formulae, but that introduces singularities into the solution. Thus, we numerically solve the ODE in the form of eqn.~\ref{eqn:ode}.}. This is done in an IPython notebook \citep{PER-GRA:2007} available at \url{https://github.com/hamogu/RecollimationXrayCTTS/blob/master/scripts/jet_recol_shocks.ipynb}.
