To derive the position of the shock front in the $(z, \omega)$ plane where the pre-shock ram pressure of the stellar wind and the post-shock thermal pressure equal the external pressure $P(z)$, we need to calculate the pre-shock density $\rho_0$ and the pre-shock velocity perpendicular to the shock front $v_0$.

For the given mass loss rate $\dot M$ of the stellar wind, the wind density at any distance $r=\sqrt{z^2+\omega^2}$ from the central star is 
\begin{equation}\label{eqn:rho}
\rho(r) = \frac{\dot M}{4 \pi r^2 v_{\inf}}\ .
\end{equation}
Figure~\ref{fig:sketch} shows that $v_0$ depends on the position of the shock:
\begin{equation}\label{eqn:v0}
v_0 = v_{\inf} \sin \psi
\end{equation}
with 
\begin{equation}\label{eqn:angle}
\psi+\alpha = - \theta \ .
\end{equation}
